<view class="container" wx:if="{{!loading}}">
  <view class="card">
    <!-- Phone -->
    <view class="form-group">
      <text class="form-label">手机号</text>
      <input
        class="form-input"
        type="number"
        placeholder="请输入手机号"
        value="{{phone}}"
        bindinput="onPhoneInput"
        maxlength="20"
      />
    </view>

    <!-- WeChat ID -->
    <view class="form-group">
      <text class="form-label">微信号</text>
      <input
        class="form-input"
        placeholder="请输入微信号"
        value="{{wechatId}}"
        bindinput="onWechatIdInput"
        maxlength="40"
      />
    </view>

    <!-- Birth date -->
    <view class="form-group">
      <text class="form-label">出生日期</text>
      <picker
        mode="date"
        value="{{birthDate}}"
        start="1900-01-01"
        end="2030-12-31"
        bindchange="onBirthDateChange"
      >
        <view class="form-input date-picker">
          <text class="{{birthDate ? 'date-text' : 'date-placeholder'}}">
            {{birthDate || '请选择出生日期'}}
          </text>
        </view>
      </picker>
    </view>

    <!-- City -->
    <view class="form-group">
      <text class="form-label">所在城市</text>
      <input
        class="form-input"
        placeholder="请输入所在城市"
        value="{{city}}"
        bindinput="onCityInput"
        maxlength="30"
      />
    </view>

    <!-- Occupation -->
    <view class="form-group">
      <text class="form-label">职业</text>
      <input
        class="form-input"
        placeholder="请输入职业"
        value="{{occupation}}"
        bindinput="onOccupationInput"
        maxlength="30"
      />
    </view>

    <!-- Custom title -->
    <view class="form-group">
      <text class="form-label">自定义称呼</text>
      <input
        class="form-input"
        placeholder="请输入自定义称呼"
        value="{{customTitle}}"
        bindinput="onCustomTitleInput"
        maxlength="20"
      />
    </view>
  </view>

  <!-- Remarks (item list) -->
  <view class="card">
    <view class="section-header">
      <text class="form-label">备注</text>
      <text class="remark-count">{{remarks.length}}/20</text>
    </view>

    <!-- Existing remark items -->
    <view class="remark-list" wx:if="{{remarks.length > 0}}">
      <view class="remark-item" wx:for="{{remarks}}" wx:key="index">
        <text class="remark-text">{{item}}</text>
        <view class="remark-delete" data-index="{{index}}" bindtap="onDeleteRemark">
          <text class="remark-delete-icon">×</text>
        </view>
      </view>
    </view>
    <view class="remark-empty" wx:else>
      <text class="info-empty">暂无备注</text>
    </view>

    <!-- Add new remark -->
    <view class="remark-add" wx:if="{{remarks.length < 20}}">
      <input
        class="form-input remark-add-input"
        placeholder="输入新备注（每条最多200字）"
        value="{{newRemark}}"
        bindinput="onNewRemarkInput"
        maxlength="200"
        confirm-type="done"
        bindconfirm="onAddRemark"
      />
      <view class="remark-add-btn {{newRemark ? '' : 'remark-add-btn-disabled'}}" bindtap="onAddRemark">
        <text>添加</text>
      </view>
    </view>
  </view>

  <!-- Save button -->
  <view
    class="{{submitting ? 'btn-disabled' : 'btn-primary'}} submit-btn"
    bindtap="onSubmit"
  >
    保存
  </view>
</view>

<!-- Loading state -->
<view class="loading-container" wx:if="{{loading}}">
  <text class="loading-text">加载中...</text>
</view>
